# Prox E2E Test Configuration
# This configuration is for comprehensive E2E testing that creates and deletes test resources
# Note: Proxmox connection details are read from your existing prox configuration

# Test VM Details (will be created and deleted during testing)
export TEST_VM_NAME="e2e-test-vm"     # Name for VM that will be created
export TEST_VM_ID="100"              # ID for VM that will be created (ensure this ID is available)
export SOURCE_VM_ID="9000"             # ID of existing VM to clone from (must exist)

# Test Container Details (will be created and deleted during testing)  
export TEST_CT_NAME="e2e-test-ct"     # Name for container that will be created
export TEST_CT_ID="101"              # ID for container that will be created (ensure this ID is available)

# Required: Template for container creation
# Can be specified in two formats:
# 1. Short format: os:version (e.g., ubuntu:22.04) - prox will auto-discover location
# 2. Full format: storage:vztmpl/template-name - specifies exact storage/node location
export TEST_TEMPLATE="ubuntu:22.04"   # Container template to use for creation

# Optional: Template host/node (where the container template is located)
# Note: If using short format template, prox will auto-discover template location
# If you need to specify exact storage, use full format in TEST_TEMPLATE instead
export TEMPLATE_NODE=""               # Node/storage where template is located (informational)

# Required: Source node for testing (where resources will be created)
export SOURCE_NODE="promox01"        # Node where test resources will be created

# Optional: Target node for migration tests (if different from source)
export TARGET_NODE="promox03"        # Target node for migration tests (leave empty to skip migration)

# Required: SSH Key for container creation tests
export TEST_SSH_KEY_FILE="$HOME/.ssh/id_rsa.pub"

# Test Options
export VERBOSE="true"
export DRY_RUN="false"
export SKIP_CLEANUP="false"           # Set to true to keep test resources for debugging

# Binary Path (relative to test script location)
export PROX_BINARY="../../bin/prox"

# Advanced / Feature Flags
export WAIT_FOR_VM_IP="false"              # Wait for VM IP before readiness (optional)
export RETRY_TRANSIENT="true"              # Retry transient failures (recommended)
export ENABLE_EXTRA_CONTAINER_TESTS="false" # Create extra temp container lifecycle tests
export AUTO_CLEAN_LEFTOVERS="true"         # Auto delete leftovers from previous failed run
export REUSE_LEFTOVERS="false"             # Reuse leftovers instead of recreating
export AUTO_BUILD="true"                   # Rebuild prox binary automatically if sources newer (set false to skip)

# If both AUTO_CLEAN_LEFTOVERS and REUSE_LEFTOVERS are true, AUTO_CLEAN_LEFTOVERS takes precedence.

